{
  "_type": "export",
  "__export_format": 4,
  "resources": [
    {
      "_type": "request_group",
      "name": "FactuMarket API",
      "description": "Microservices API for Invoice Management",
      "environment": {
        "base_url": "http://localhost:3000",
        "api_key": "YOUR_API_KEY_HERE",
        "jwt_token": ""
      },
      "children": [
        {
          "_type": "request",
          "name": "Login - Get JWT Token",
          "method": "POST",
          "url": "{{ _.base_url }}/api/v1/auth/login",
          "headers": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ],
          "body": {
            "mimeType": "application/json",
            "text": "{\n  \"api_key\": \"{{ _.api_key }}\"\n}"
          },
          "description": "Authenticate with API Key to receive JWT token"
        },
        {
          "_type": "request",
          "name": "List All Clients",
          "method": "GET",
          "url": "{{ _.base_url }}/api/v1/clients",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "description": "Get list of all clients"
        },
        {
          "_type": "request",
          "name": "Create Client",
          "method": "POST",
          "url": "{{ _.base_url }}/api/v1/clients",
          "headers": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "body": {
            "mimeType": "application/json",
            "text": "{\n  \"client\": {\n    \"company_name\": \"Panadería Don Pedro\",\n    \"nit\": \"900123456-7\",\n    \"email\": \"contacto@panaderiadonpedro.com\",\n    \"address\": \"Calle 123 #45-67, Bogotá\"\n  }\n}"
          },
          "description": "Create a new client in the system"
        },
        {
          "_type": "request",
          "name": "Get Client by ID (with Invoices)",
          "method": "GET",
          "url": "{{ _.base_url }}/api/v1/clients/1?page=1&per_page=10",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "description": "Retrieve a specific client by ID with their invoices paginated"
        },
        {
          "_type": "request",
          "name": "Search Client by NIT",
          "method": "GET",
          "url": "{{ _.base_url }}/api/v1/clients/search_by_nit?nit=900123456-7",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "description": "Search for a client by NIT (Tax ID)"
        },
        {
          "_type": "request",
          "name": "List Invoices (Filter & Pagination)",
          "method": "GET",
          "url": "{{ _.base_url }}/api/v1/invoices?page=1&per_page=10",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "description": "Get paginated list of invoices. Defaults to current day if dates are not provided."
        },
        {
          "_type": "request",
          "name": "Create Invoice",
          "method": "POST",
          "url": "{{ _.base_url }}/api/v1/invoices",
          "headers": [
            {
              "name": "Content-Type",
              "value": "application/json"
            },
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "body": {
            "mimeType": "application/json",
            "text": "{\n  \"client_id\": 1,\n  \"amount\": 150000.50\n}"
          },
          "description": "Create a new invoice. Validates client existence and amount > 0"
        },
        {
          "_type": "request",
          "name": "Get Invoice by ID",
          "method": "GET",
          "url": "{{ _.base_url }}/api/v1/invoices/1",
          "headers": [
            {
              "name": "Authorization",
              "value": "Bearer {{ _.jwt_token }}"
            }
          ],
          "description": "Get specific invoice details including client info"
        },
        {
          "_type": "request_group",
          "name": "Audit Logs",
          "children": [
            {
              "_type": "request",
              "name": "List Audit Logs (Paginated)",
              "method": "GET",
              "url": "{{ _.base_url }}/api/v1/audit_logs?page=1&per_page=10",
              "headers": [
                {
                  "name": "Authorization",
                  "value": "Bearer {{ _.jwt_token }}"
                }
              ],
              "description": "Get all audit logs with pagination"
            },
            {
              "_type": "request",
              "name": "Get Audit Log by ID",
              "method": "GET",
              "url": "{{ _.base_url }}/api/v1/audit_logs/ID_HERE",
              "headers": [
                {
                  "name": "Authorization",
                  "value": "Bearer {{ _.jwt_token }}"
                }
              ],
              "description": "Retrieve specific audit log"
            },
            {
              "_type": "request",
              "name": "Filter Audit Logs by Entity",
              "method": "GET",
              "url": "{{ _.base_url }}/api/v1/audit_logs/by_entity?entity=Client&page=1",
              "headers": [
                {
                  "name": "Authorization",
                  "value": "Bearer {{ _.jwt_token }}"
                }
              ],
              "description": "Filter logs by Entity type"
            }
          ]
        }
      ]
    }
  ]
}
